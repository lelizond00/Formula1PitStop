# Formula1PitStop
MATLAB Code that focuses on finding the best pit stop window for either a one stop strategy or a two stop, depending on several factors such as tyre type (durability and speed), temperature, and race length.

The code begins by setting the format for numbers and graphs, merely aesthetic. Euler’s number is used in order to create a more accurate representation of tyre degradation in the graphs. 

Then, some parameters are established. A normal race would be between 40 and 80 laps depending on the length of the circuit. PITSTOPTIME is there to account for the time lost during the pitstop process, which can realistically range from 15 to 30 seconds depending on the circuit. Following that, we have three parameters the are crucial to the program, as they are the basis for all lap times. Soft tyres are faster than mediums, and mediums are faster than hards. The numbers represent seconds in a lap, and a normal lap can range from 70 to 100 seconds depending on the circuit. 

A track temperature parameter is then set in to simulate how tyres behave differently when the track gets warmer. I assume a baseline track temperature of 30 degrees centigrade. A track’s temperature can go up to 60 degrees centigrade depending on the location of the circuit and the weather. Therefore, it is reasonable to have a number in TRACKTEMPERATURE that is between 0 and 30. I could not find any information related to how tyres behave when they get colder than “normal”, so this simulation only focuses on when the tyres get hotter than the normal baseline. I use a part of a cosine function to model how the temperature affects tyre degradation. Using a cosine curve gave me a good control over how high the degradation value can get. Next you can see the degradation coefficients for each tyre compound. There is an inverse relationship between the speed allowed by tyres and how much they wear. This wear is exacerbated when the temperature increases. 

These times and degradation coefficients help create a model that lists lap times for each compound. The best lap time is in the first lap, and each lap after the tyres yield slower times. How much slower is decided by the degradation coefficient of each tyre, whose numbers are arbitrary, yet they produce reasonably accurate lap times based on empirical observations.

Next, the simulation for a one stop race.
In order to decide when a car should pit, we have to explore every single possible combination of a one stop race. The best way is to create a matrix that will be filled out the following way. If we want to simulate a race that starts with Softs and ends with Hards, the matrix’s first column will have the first lap in Softs and the 2nd with Hards, keeping the latter compound until the end of the race. The second column will have the first two laps in Softs, and the rest in Hards. Let’s say we will have 50 laps. This pattern will go on until the last column, the 50th column, where we assume that the Softs tyres are held until lap 49, for a last lap stint in Hards. After constructing this matrix, we sum the lap times of each column and we find the minimum lap time among them. We then locate the place in the matrix where this minimum race time is achieved, and store it. This process is repeated for each possible combination, those being Soft and Mediums, and Medium and Hards. It is important to note that in these combinations it does not matter which compound you choose to start the race with. That is, a Soft Medium combination has the same race time as the Medium Soft. After running each of these, we use another matrix to compare the six combinations (with three unique race times) and choose the fastest one. After finding the fastest one, its corresponding code is ran again and a graph is made, which is the graph seen when referring to the Optimal One Stop Strategy.

The complex part of the model is next. The Two Stop Simulation carries many more possible combinations of compounds and opportunities to change the types. Therefore, it occupies the bulk of the lines of code. The concept is the same as in the One Stop, with a few minor tweaks. A base matrix is created again and it shows all of the combinations of pitting at any lap for a given combination of tyres. Then, each of those combinations gets put into its own matrix with all of the combinations coming with pitting a second time for a third set of tyres. After going through all combinations, it logs the lowest time achieved in a race out of them and saves it. This process is repeated until all combinations of pit stops are done for a given set of tyres. After that, a global minimum is located and saves the number to a list. This list will be filled with the best strategy options for each combination of tyres. The best will be picked out and the code for that strategy will run again in order to produce its graph.
